# filename: ansible/roles/pi_log/templates/config.toml.j2

[serial]
device = "/dev/ttyUSB0"
baudrate = 9600

[sqlite]
path = "/opt/pi-log/readings.db"

[logging]
version = 1
level = "INFO"
log_dir = "/opt/pi-log/logs"

# --- dictConfig additions ---
[logging.handlers.console]
class = "logging.StreamHandler"
level = "INFO"
formatter = "standard"
stream = "ext://sys.stdout"

[logging.formatters.standard]
format = "%(asctime)s [%(levelname)s] %(name)s: %(message)s"

[logging.root]
level = "INFO"
handlers = ["console"]
# --- end dictConfig additions ---

[ingestion]
poll_interval = 1

[api]
enabled = false
base_url = ""
token = ""

[push]
enabled = {{ pi_log_push_enabled | lower }}
url = "{{ pi_log_push_url }}"
api_key = "{{ pi_log_api_token }}"

[device]
name = "{{ pi_log_device_id }}"
token = "{{ pi_log_device_token }}"

[telemetry]
enabled = false
